namespace = Stellaris_Annals

country_event = {#正常周报
	id = Stellaris_Annals.1
	is_triggered_only = yes
	diplomatic = yes
	custom_gui = News_Framework

	trigger = {
		is_ai = no
	}

	immediate = {
		random_owned_leader = {
			limit = {
				is_researching_area = society
			}
			save_event_target_as = Society_Research_Leader_Target
		}
		random_owned_leader = {
			limit = {
				is_researching_area = physics
			}
			save_event_target_as = Physics_Research_Leader_Target
		}
		random_owned_leader = {
			limit = {
				is_researching_area = engineering
			}
			save_event_target_as = Engineering_Research_Leader_Target
		}
		owner = {
			if = {
				limit = { 
					NOT = {
						exists = event_target:GetCountryNameTarget
					}
				}
				save_global_event_target_as = GetCountryNameTarget
			}
		}
		country_event = {
			id = Stellaris_Annals.1
			days = 180
		}
	}

	title = Stellaris_Annals.1.name
	desc = {
		text = Stellaris_Annals.1.desc
		trigger = {
			NOR = {
				has_country_flag = time_mass_extinction
				has_country_flag = time_habitable_worlds_survey
			}
		}
	}
	#标题采用loc，描述采用desc
	desc = {#宜居星球事件链
		text = Habitable_Worlds_Survey_Desc
		trigger = {
			has_country_flag = time_habitable_worlds_survey
		}
	}
	desc = {#大灭绝事件链
		text = The_Mass_Extinction_Desc
		trigger = {
			has_country_flag = time_mass_extinction
		}
	}
	desc = {#第一次殖民遗落球
		text = Find_In_Pc_Relic_Colonies_Desc
		trigger = {
			owner = {
				has_country_flag = find_in_pc_relic_colonies_1
			}
		}
	}
}

country_event = {#三大飞升专报
	id = Stellaris_Annals.2
	is_triggered_only = yes
	diplomatic = yes
	custom_gui = News_Framework

	trigger = {
		is_ai = no
		if = {
			limit = {#合成进化
				has_ascension_perk = ap_synthetic_evolution
			}
			NOT = {
				has_country_flag = get_ap_synthetic_evolution
			}
		}
		else_if = {
			limit = { #超凡入圣
				has_ascension_perk = ap_transcendence
			}
			NOT = {
				has_country_flag = get_ap_transcendence
			}
		}
		else_if = {
			limit = { #掌控进化
				has_ascension_perk = ap_evolutionary_mastery
			}
			NOT = {
				has_country_flag = get_ap_evolutionary_mastery
			}
		}
		if = {
			limit = {#血肉苦弱
				has_ascension_perk = ap_the_flesh_is_weak
			}
			NOT = {
				has_country_flag = get_ap_the_flesh_is_weak
			}
		}
		else = {
			always = no
		}
	}

	immediate = {
		if = {
			limit = { 
				has_ascension_perk = ap_synthetic_evolution
			}
			set_country_flag = get_ap_synthetic_evolution
		}
		else_if = {
			limit = { 
				has_ascension_perk = ap_transcendence
			}
			set_country_flag = get_ap_transcendence
		}
		else_if = {
			limit = {
				has_ascension_perk = ap_evolutionary_mastery
			}
			set_country_flag = get_ap_evolutionary_mastery
		}
		else_if = {
			limit = {
				has_ascension_perk = ap_the_flesh_is_weak
			}
			set_country_flag = get_ap_the_flesh_is_weak
		}
	}

	title = Stellaris_Annals.2.name
	desc = Stellaris_Annals.2.desc
}

country_event = {#战争专栏
	id = Stellaris_Annals.3
	is_triggered_only = yes
	diplomatic = yes
	custom_gui = News_Framework

	trigger = {
		
	}

	title = Stellaris_Annals.3.name
	desc = Stellaris_Annals.3.desc
}
country_event = {#物种标本专栏
	id = Stellaris_Annals.4
	is_triggered_only = yes
	diplomatic = yes
	custom_gui = News_Framework

	trigger = {
		owner = {
			has_event_chain = specimen_procurement_chain
		}
	}

	immediate = {
		random_planet = {
			limit = {
				space_owner = {
					is_same_value = root
				}
				habitability = {
					who = prev.species
					value >= 0.8
				}
			}
			save_event_target_as = random_habite_planet
		}
	}

	title = Stellaris_Annals.4.name
	desc = {
		text = Stellaris_Annals.4.1.desc
		trigger = {
			has_special_project = TARBLAC_PROCUREMENT
		}
	}
	desc = {
		text = Stellaris_Annals.4.2.desc
		trigger = {
			has_special_project = TASSARGOID_PROCUREMENT
		}
	}
	desc = {
		text = Stellaris_Annals.4.3.desc
		trigger = {
			has_special_project = ORINTHI_PROCUREMENT
		}
	}
	desc = {
		text = Stellaris_Annals.4.4.desc
		trigger = {
			has_special_project = SNIRAN_PROCUREMENT
		}
	}
	desc = {
		text = Stellaris_Annals.4.5.desc
		trigger = {
			has_special_project = GOOLANTHA_PROCUREMENT
		}
	}
	desc = {
		text = Stellaris_Annals.4.6.desc
		trigger = {
			has_special_project = UDDLORAN_PROCUREMENT
		}
	}
	desc = {
		text = Stellaris_Annals.4.7.desc
		trigger = {
			has_special_project = ZULCOR_PROCUREMENT
		}
	}
}